# ğŸ”„ æµ‹è¯•æ–¹å¼å¯¹æ¯”

## å¿«é€Ÿå›ç­”ä½ çš„é—®é¢˜

**æ˜¯çš„ï¼æ¨èå…ˆåœ¨æœ¬åœ° Hardhat èŠ‚ç‚¹æµ‹è¯•ï¼Œå†éƒ¨ç½²åˆ° BSC æµ‹è¯•ç½‘ã€‚**

---

## ğŸ“Š ä¸¤ç§æµ‹è¯•æ–¹å¼è¯¦ç»†å¯¹æ¯”

### ğŸ  æ–¹å¼ 1: æœ¬åœ° Hardhat èŠ‚ç‚¹

```bash
# ç»ˆç«¯ 1
npx hardhat node

# ç»ˆç«¯ 2
npx hardhat run scripts/local-01-deploy-all.ts --network localhost
```

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **æˆæœ¬** | âœ… å®Œå…¨å…è´¹ |
| **é€Ÿåº¦** | âœ… å³æ—¶ç¡®è®¤ï¼ˆæ¯«ç§’çº§ï¼‰|
| **é‡ç½®** | âœ… éšæ—¶é‡å¯ï¼Œæ— é™æ¬¡æµ‹è¯• |
| **è´¦æˆ·** | âœ… è‡ªåŠ¨æä¾› 20 ä¸ªæµ‹è¯•è´¦æˆ· |
| **ä½™é¢** | âœ… æ¯ä¸ªè´¦æˆ· 10,000 ETH |
| **æ—¶é—´æ§åˆ¶** | âœ… å¯ä»¥å¿«è¿›æ—¶é—´ï¼ˆæµ‹è¯•è§£é”ï¼‰|
| **è°ƒè¯•** | âœ… è¯¦ç»†é”™è¯¯ä¿¡æ¯å’Œå †æ ˆ |
| **å‰ç«¯è¿æ¥** | âš ï¸ éœ€è¦é…ç½® MetaMask |
| **åŒºå—æµè§ˆå™¨** | âŒ æ— æ³•åœ¨ BSCScan æŸ¥çœ‹ |
| **çœŸå®æ€§** | âš ï¸ ä¸æ˜¯çœŸå®ç½‘ç»œç¯å¢ƒ |

**æœ€é€‚åˆï¼š**
- âœ… å¿«é€Ÿè¿­ä»£å¼€å‘
- âœ… åŠŸèƒ½é€»è¾‘éªŒè¯
- âœ… Bug è°ƒè¯•
- âœ… Gas ä¼˜åŒ–æµ‹è¯•
- âœ… è¾¹ç•Œæ¡ä»¶æµ‹è¯•
- âœ… æ—¶é—´ç›¸å…³æµ‹è¯•ï¼ˆè§£é”æœºåˆ¶ï¼‰

---

### ğŸŒ æ–¹å¼ 2: BSC æµ‹è¯•ç½‘

```bash
npx hardhat run scripts/01-deploy-usdt.ts --network bscTestnet
npx hardhat run scripts/02-deploy-main.ts --network bscTestnet
```

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **æˆæœ¬** | âš ï¸ éœ€è¦æµ‹è¯•ç½‘ BNBï¼ˆå…è´¹è·å–ï¼‰|
| **é€Ÿåº¦** | âš ï¸ ~3ç§’/åŒºå— |
| **é‡ç½®** | âŒ ä¸å¯é€†ï¼Œæ¯æ¬¡éƒ¨ç½²æ–°åœ°å€ |
| **è´¦æˆ·** | âš ï¸ éœ€è¦è‡ªå·±åˆ›å»ºé’±åŒ… |
| **ä½™é¢** | âš ï¸ éœ€è¦ä»æ°´é¾™å¤´è·å– BNB |
| **æ—¶é—´æ§åˆ¶** | âŒ çœŸå®æ—¶é—´ï¼Œæ— æ³•å¿«è¿› |
| **è°ƒè¯•** | âš ï¸ é”™è¯¯ä¿¡æ¯æœ‰é™ |
| **å‰ç«¯è¿æ¥** | âœ… ç›´æ¥è¿æ¥ï¼Œæ— éœ€é…ç½® |
| **åŒºå—æµè§ˆå™¨** | âœ… å¯åœ¨ BSCScan æŸ¥çœ‹ |
| **çœŸå®æ€§** | âœ… çœŸå®ç½‘ç»œç¯å¢ƒ |

**æœ€é€‚åˆï¼š**
- âœ… æœ€ç»ˆéƒ¨ç½²å‰éªŒè¯
- âœ… å‰ç«¯å®Œæ•´é›†æˆæµ‹è¯•
- âœ… çœŸå®ç½‘ç»œæ€§èƒ½æµ‹è¯•
- âœ… å¤šç”¨æˆ·åœºæ™¯æµ‹è¯•
- âœ… å…¬å¼€å±•ç¤ºå’Œåˆ†äº«

---

## ğŸ¯ æ¨èçš„å®Œæ•´æµ‹è¯•æµç¨‹

### Phase 1: æœ¬åœ°å¼€å‘æµ‹è¯• (1-2 å°æ—¶) â­

```bash
# 1. å¯åŠ¨æœ¬åœ°èŠ‚ç‚¹
npx hardhat node

# 2. éƒ¨ç½²å’Œæµ‹è¯•ï¼ˆæ–°ç»ˆç«¯ï¼‰
npx hardhat run scripts/local-01-deploy-all.ts --network localhost
npx hardhat run scripts/local-02-test-mint.ts --network localhost
```

**ç›®æ ‡ï¼š**
- éªŒè¯åˆçº¦é€»è¾‘
- å¿«é€Ÿå‘ç° bug
- ä¼˜åŒ– Gas
- æµ‹è¯•æ‰€æœ‰åŠŸèƒ½

**ä¼˜åŠ¿ï¼š**
- å…è´¹
- å¿«é€Ÿ
- å¯é‡å¤
- æ˜“è°ƒè¯•

### Phase 2: æœ¬åœ°å®Œæ•´æµ‹è¯• (2-3 å°æ—¶)

```bash
# ç»§ç»­æµ‹è¯•æ›´å¤šåœºæ™¯
npx hardhat run scripts/local-03-test-distribution.ts --network localhost
npx hardhat run scripts/local-04-test-transfer.ts --network localhost
npx hardhat run scripts/local-05-test-marketplace.ts --network localhost
npx hardhat run scripts/local-06-test-unlock.ts --network localhost
```

**ç›®æ ‡ï¼š**
- è¦†ç›–æ‰€æœ‰åŠŸèƒ½
- æµ‹è¯•è¾¹ç•Œæ¡ä»¶
- å‹åŠ›æµ‹è¯•
- æ—¶é—´ç›¸å…³æµ‹è¯•

### Phase 3: æµ‹è¯•ç½‘éªŒè¯ (2-4 å°æ—¶) â­

```bash
# éƒ¨ç½²åˆ° BSC æµ‹è¯•ç½‘
npx hardhat run scripts/01-deploy-usdt.ts --network bscTestnet
npx hardhat run scripts/02-deploy-main.ts --network bscTestnet

# è¿è¡Œæµ‹è¯•
npx hardhat run scripts/04-test-mint.ts --network bscTestnet
npx hardhat run scripts/05-test-distribute-and-claim.ts --network bscTestnet
```

**ç›®æ ‡ï¼š**
- éªŒè¯çœŸå®ç½‘ç»œè¡Œä¸º
- å‰ç«¯å®Œæ•´é›†æˆ
- ç”¨æˆ·ä½“éªŒæµ‹è¯•
- å‡†å¤‡ä¸»ç½‘éƒ¨ç½²

---

## ğŸ“ å…·ä½“æµ‹è¯•åœºæ™¯å¯¹æ¯”

### åœºæ™¯ 1: é“¸é€  NFT

**æœ¬åœ°æµ‹è¯•ï¼š**
```bash
# å³æ—¶å®Œæˆ
âœ… éƒ¨ç½²åˆçº¦: <1ç§’
âœ… é“¸é€  NFT: <1ç§’
âœ… éªŒè¯ç»“æœ: <1ç§’
ğŸ’° æˆæœ¬: $0
```

**æµ‹è¯•ç½‘ï¼š**
```bash
# éœ€è¦ç­‰å¾…ç¡®è®¤
â±ï¸ éƒ¨ç½²åˆçº¦: ~30ç§’
â±ï¸ é“¸é€  NFT: ~3ç§’
â±ï¸ éªŒè¯ç»“æœ: ~3ç§’
ğŸ’° æˆæœ¬: ~0.001 BNB (æµ‹è¯•ç½‘)
```

### åœºæ™¯ 2: æµ‹è¯•è§£é”æœºåˆ¶ï¼ˆ1å¹´åï¼‰

**æœ¬åœ°æµ‹è¯•ï¼š**
```typescript
// å¯ä»¥å¿«è¿›æ—¶é—´ï¼
await ethers.provider.send("evm_increaseTime", [365 * 24 * 60 * 60]);
await ethers.provider.send("evm_mine");
// âœ… ç«‹å³æµ‹è¯• 1 å¹´åçš„çŠ¶æ€
```

**æµ‹è¯•ç½‘ï¼š**
```
âŒ æ— æ³•å¿«è¿›æ—¶é—´
â° éœ€è¦çœŸå®ç­‰å¾… 1 å¹´
ğŸ¤” æˆ–ä½¿ç”¨ä¿®æ”¹åçš„æµ‹è¯•åˆçº¦ï¼ˆçŸ­æ—¶é—´é”å®šï¼‰
```

### åœºæ™¯ 3: è°ƒè¯•é”™è¯¯

**æœ¬åœ°æµ‹è¯•ï¼š**
```
âŒ Error: VM Exception while processing transaction: reverted with reason string 'Insufficient USDT balance'
    at NFTManager.mintNFT (contracts/NFTManager.sol:234)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    
âœ… è¯¦ç»†çš„å †æ ˆè·Ÿè¸ªï¼Œç²¾ç¡®åˆ°ä»£ç è¡Œæ•°
```

**æµ‹è¯•ç½‘ï¼š**
```
âŒ Transaction failed
Gas used: 23456

âš ï¸ æœ‰é™çš„é”™è¯¯ä¿¡æ¯
ğŸ” éœ€è¦åœ¨ BSCScan æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
```

---

## ğŸ’¡ æœ€ä½³å®è·µå»ºè®®

### âœ… DO (æ¨èåšæ³•)

1. **å…ˆæœ¬åœ°ï¼Œåæµ‹è¯•ç½‘**
   ```
   æœ¬åœ°æµ‹è¯•é€šè¿‡ â†’ æµ‹è¯•ç½‘éªŒè¯ â†’ ä¸»ç½‘éƒ¨ç½²
   ```

2. **æœ¬åœ°æµ‹è¯•ç”¨äºå¿«é€Ÿè¿­ä»£**
   ```
   å¼€å‘åŠŸèƒ½ â†’ æœ¬åœ°æµ‹è¯• â†’ å‘ç°é—®é¢˜ â†’ ä¿®å¤ â†’ é‡å¤
   ```

3. **æµ‹è¯•ç½‘ç”¨äºæœ€ç»ˆéªŒè¯**
   ```
   æœ¬åœ°æµ‹è¯•å®Œæˆ â†’ æµ‹è¯•ç½‘éƒ¨ç½² â†’ å‰ç«¯é›†æˆ â†’ ç”¨æˆ·æµ‹è¯•
   ```

4. **ä¿ç•™æµ‹è¯•è„šæœ¬**
   ```
   æ¯ä¸ªåŠŸèƒ½éƒ½å†™æµ‹è¯•è„šæœ¬ â†’ å›å½’æµ‹è¯•
   ```

### âŒ DON'T (ä¸æ¨èåšæ³•)

1. **ç›´æ¥åœ¨æµ‹è¯•ç½‘å¼€å‘**
   ```
   âŒ æµªè´¹æ—¶é—´ç­‰å¾…ç¡®è®¤
   âŒ æµªè´¹æµ‹è¯• BNB
   âŒ éš¾ä»¥è°ƒè¯•
   ```

2. **è·³è¿‡æœ¬åœ°æµ‹è¯•**
   ```
   âŒ é”™è¿‡å¿«é€Ÿå‘ç° bug çš„æœºä¼š
   âŒ å¢åŠ æµ‹è¯•ç½‘è°ƒè¯•æˆæœ¬
   ```

3. **åªåšæœ¬åœ°æµ‹è¯•**
   ```
   âŒ é”™è¿‡çœŸå®ç½‘ç»œçš„é—®é¢˜
   âŒ å‰ç«¯æ— æ³•å……åˆ†æµ‹è¯•
   ```

---

## ğŸš€ ç«‹å³å¼€å§‹

### å¼€å§‹æœ¬åœ°æµ‹è¯•ï¼ˆæ¨èå…ˆåšï¼‰

```bash
# 1. æ‰“å¼€ç»ˆç«¯ï¼Œå¯åŠ¨æœ¬åœ°èŠ‚ç‚¹
cd /Users/qizhongzhu/enclave/node-nft/contracts
npx hardhat node

# 2. æ‰“å¼€æ–°ç»ˆç«¯ï¼Œè¿è¡Œæµ‹è¯•
cd /Users/qizhongzhu/enclave/node-nft/contracts
npx hardhat run scripts/local-01-deploy-all.ts --network localhost
npx hardhat run scripts/local-02-test-mint.ts --network localhost
```

**é¢„è®¡æ—¶é—´:** 5-10 åˆ†é’Ÿ  
**æˆæœ¬:** $0

### æµ‹è¯•ç½‘éƒ¨ç½²ï¼ˆæœ¬åœ°æµ‹è¯•é€šè¿‡åï¼‰

```bash
# 1. é…ç½®ç¯å¢ƒ
cd /Users/qizhongzhu/enclave/node-nft/contracts
cp .env.example .env
nano .env  # æ·»åŠ ç§é’¥

# 2. è·å–æµ‹è¯• BNB
# è®¿é—®: https://testnet.binance.org/faucet-smart

# 3. éƒ¨ç½²
npx hardhat run scripts/01-deploy-usdt.ts --network bscTestnet
npx hardhat run scripts/02-deploy-main.ts --network bscTestnet
```

**é¢„è®¡æ—¶é—´:** 30-60 åˆ†é’Ÿ  
**æˆæœ¬:** ~0.5 BNB (æµ‹è¯•ç½‘ï¼Œå…è´¹)

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **[LOCAL_TESTING_GUIDE.md](./LOCAL_TESTING_GUIDE.md)** - æœ¬åœ°æµ‹è¯•è¯¦ç»†æŒ‡å—
- **[QUICK_START.md](./QUICK_START.md)** - æµ‹è¯•ç½‘å¿«é€Ÿå¼€å§‹
- **[TESTNET_DEPLOYMENT_GUIDE.md](./TESTNET_DEPLOYMENT_GUIDE.md)** - å®Œæ•´æµ‹è¯•ç½‘æŒ‡å—

---

## ğŸ¯ æ€»ç»“

| é˜¶æ®µ | ä½¿ç”¨ | æ—¶é—´ | æˆæœ¬ | ç›®çš„ |
|------|------|------|------|------|
| **å¼€å‘** | æœ¬åœ°èŠ‚ç‚¹ | 1-2å°æ—¶ | $0 | å¿«é€ŸéªŒè¯é€»è¾‘ |
| **å®Œæ•´æµ‹è¯•** | æœ¬åœ°èŠ‚ç‚¹ | 2-3å°æ—¶ | $0 | è¦†ç›–æ‰€æœ‰åŠŸèƒ½ |
| **é›†æˆéªŒè¯** | BSC æµ‹è¯•ç½‘ | 2-4å°æ—¶ | å…è´¹ | çœŸå®ç¯å¢ƒæµ‹è¯• |
| **ä¸»ç½‘éƒ¨ç½²** | BSC ä¸»ç½‘ | 1-2å°æ—¶ | ~$50-100 | ç”Ÿäº§ç¯å¢ƒ |

---

**ğŸ‰ å»ºè®®ï¼šä»æœ¬åœ°æµ‹è¯•å¼€å§‹ï¼Œå¿«é€Ÿã€å…è´¹ã€é«˜æ•ˆï¼**

```bash
# ç«‹å³å¼€å§‹
npx hardhat node
```

**Happy Testing! ğŸš€**

